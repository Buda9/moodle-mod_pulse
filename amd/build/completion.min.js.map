{"version":3,"sources":["../src/completion.js"],"names":["define","Fragment","updatecompletionbuttons","instances","document","getElementsByClassName","console","log","modules","i","length","instance","id","getAttribute","moduleid","parseInt","replace","push","params","JSON","stringify","completionbuttons","loadFragment","then","data","parse","k","approvebtn","element","getElementById","referenceNode","completioncontent","createElement","innerHTML","classList","add","parentNode","insertBefore","nextSibling","init","body","contains"],"mappings":"AAAAA,OAAM,wBAAC,CAAC,eAAD,CAAD,CAAoB,SAASC,CAAT,CAAmB,CAEzC,MAAO,CAEHC,uBAAuB,CAAE,kCAAW,CAChC,GAAIC,CAAAA,CAAS,CAAGC,QAAQ,CAACC,sBAAT,CAAgC,eAAhC,CAAhB,CACAC,OAAO,CAACC,GAAR,CAAYJ,CAAZ,EAEA,OADIK,CAAAA,CAAO,CAAG,EACd,CAASC,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGN,CAAS,CAACO,MAA9B,CAAsCD,CAAC,EAAvC,CAA2C,IACnCE,CAAAA,CAAQ,CAAGR,CAAS,CAACM,CAAD,CADe,CAEnCG,CAAE,CAAGD,CAAQ,CAACE,YAAT,CAAsB,IAAtB,CAF8B,CAGvCC,QAAQ,CAAGC,QAAQ,CAACH,CAAE,CAACI,OAAH,CAAW,SAAX,CAAsB,EAAtB,CAAD,CAAnB,CACAR,CAAO,CAACS,IAAR,CAAaH,QAAb,CACH,CACD,GAAII,CAAAA,CAAM,CAAG,CAACV,OAAO,CAAGW,IAAI,CAACC,SAAL,CAAeZ,CAAf,CAAX,CAAb,CACA,GAAqB,CAAjB,CAAAA,CAAO,CAACE,MAAZ,CAAwB,CACpB,GAAIW,CAAAA,CAAiB,CAAGpB,CAAQ,CAACqB,YAAT,CAAsB,WAAtB,CAAmC,mBAAnC,CAAwD,CAAxD,CAA2DJ,CAA3D,CAAxB,CACAG,CAAiB,CAACE,IAAlB,CAAuB,SAACC,CAAD,CAAU,CAC7BA,CAAI,CAAGL,IAAI,CAACM,KAAL,CAAWD,CAAX,CAAP,CACA,IAAK,GAAIE,CAAAA,CAAT,GAAcF,CAAAA,CAAd,CAAoB,CACpBG,UAAU,CAAGH,CAAI,CAACE,CAAD,CAAjB,CACApB,OAAO,CAACC,GAAR,CAAYmB,CAAZ,EACAE,OAAO,CAAGxB,QAAQ,CAACyB,cAAT,CAAwB,UAAYH,CAApC,CAAV,CACAI,aAAa,CAAGF,OAAO,CAACvB,sBAAR,CAA+B,oBAA/B,EAAqD,CAArD,CAAhB,CACA0B,iBAAiB,CAAG3B,QAAQ,CAAC4B,aAAT,CAAuB,KAAvB,CAApB,CACAD,iBAAiB,CAACE,SAAlB,CAA8BN,UAA9B,CACAI,iBAAiB,CAACG,SAAlB,CAA4BC,GAA5B,CAAgC,sBAAhC,EACAL,aAAa,CAACM,UAAd,CAAyBC,YAAzB,CAAsCN,iBAAtC,CAAyDD,aAAa,CAACQ,WAAvE,EAEAhC,OAAO,CAACC,GAAR,CAAYwB,iBAAZ,CACC,CACJ,CAdD,CAeH,CACJ,CA/BE,CAiCHQ,IAAI,CAAE,eAAW,CACb,GAAInC,QAAQ,CAACoC,IAAT,CAAcN,SAAd,CAAwBO,QAAxB,CAAiC,kBAAjC,CAAJ,CAA0D,CACtD,KAAKvC,uBAAL,EACH,CACJ,CArCE,CAwCV,CA1CK,CAAN","sourcesContent":["define(['core/fragment'], function(Fragment) {\n\n    return {\n\n        updatecompletionbuttons: function() {\n            var instances = document.getElementsByClassName('modtype_pulse');\n            console.log(instances);\n            var modules = [];\n            for (var i = 0; i < instances.length; i++) {\n                var instance = instances[i];\n                var id = instance.getAttribute('id');\n                moduleid = parseInt(id.replace('module-', ''));\n                modules.push(moduleid);\n            }\n            var params = {modules:  JSON.stringify(modules)};\n            if (modules.length > 0) {\n                let completionbuttons = Fragment.loadFragment('mod_pulse', 'completionbuttons', 1, params);\n                completionbuttons.then((data) => {\n                    data = JSON.parse(data);\n                    for (var k in data) {\n                    approvebtn = data[k];\n                    console.log(k);\n                    element = document.getElementById('module-' + k);\n                    referenceNode = element.getElementsByClassName('contentwithoutlink')[0];\n                    completioncontent = document.createElement('div');\n                    completioncontent.innerHTML = approvebtn;\n                    completioncontent.classList.add('pulse-completion-btn');\n                    referenceNode.parentNode.insertBefore(completioncontent, referenceNode.nextSibling);\n                    // Actions.innerHTML = approvebtn+actions.innerHTML;\n                    console.log(completioncontent);\n                    }\n                });\n            }\n        },\n\n        init: function() {\n            if (document.body.classList.contains('path-course-view')) {\n                this.updatecompletionbuttons();\n            }\n        },\n\n    };\n});"],"file":"completion.min.js"}